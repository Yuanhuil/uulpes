<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.njpes.www.dao.consultcenter.AnalyzeMapper">
	<resultMap id="BaseResultMap" type="com.njpes.www.entity.consultcenter.Analyze">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jun 25 
			21:40:18 CST 2015. -->
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="role" jdbcType="CHAR" property="role" />
		<result column="grade" jdbcType="CHAR" property="grade" />
		<result column="model" jdbcType="BIGINT" property="model" />
		<result column="type" jdbcType="BIGINT" property="type" />
		<result column="sex" jdbcType="CHAR" property="sex" />
		<result column="date" jdbcType="TIMESTAMP" property="date" />
		<result column="coach_type" jdbcType="CHAR" property="coachType" />
		<result column="result" jdbcType="CHAR" property="result" />
		<result column="coach_object" jdbcType="CHAR" property="coachObject" />
		<result column="schoolid" jdbcType="BIGINT" property="schoolid" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jun 25 
			21:40:18 CST 2015. -->
		id, role, grade, model, type, sex, date, coach_type, result,
		coach_object, schoolid
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jun 25 
			21:40:18 CST 2015. -->
		select
		<include refid="Base_Column_List" />
		from coach_analyze
		where id = #{id,jdbcType=BIGINT}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jun 25 
			21:40:18 CST 2015. -->
		delete from coach_analyze
		where id = #{id,jdbcType=BIGINT}
	</delete>
	<insert id="insert" parameterType="com.njpes.www.entity.consultcenter.Analyze">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jun 25 
			21:40:18 CST 2015. -->
		insert into coach_analyze (id, role, grade, model,
		type, sex, date,
		coach_type,
		result, coach_object, schoolid
		)
		values
		(#{id,jdbcType=BIGINT}, #{role,jdbcType=CHAR},
		#{grade,jdbcType=CHAR},
		#{model,jdbcType=BIGINT},
		#{type,jdbcType=BIGINT},
		#{sex,jdbcType=CHAR},
		#{date,jdbcType=TIMESTAMP},
		#{coachType,jdbcType=CHAR},
		#{result,jdbcType=CHAR},
		#{coachObject,jdbcType=CHAR},
		#{schoolid,jdbcType=BIGINT}
		)
	</insert>
	<insert id="insertSelective" parameterType="com.njpes.www.entity.consultcenter.Analyze">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jun 25 
			21:40:18 CST 2015. -->
		insert into coach_analyze
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="role != null">
				role,
			</if>
			<if test="grade != null">
				grade,
			</if>
			<if test="model != null">
				model,
			</if>
			<if test="type != null">
				type,
			</if>
			<if test="sex != null">
				sex,
			</if>
			<if test="date != null">
				date,
			</if>
			<if test="coachType != null">
				coach_type,
			</if>
			<if test="result != null">
				result,
			</if>
			<if test="coachObject != null">
				coach_object,
			</if>
			<if test="schoolid != null">
				schoolid,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=BIGINT},
			</if>
			<if test="role != null">
				#{role,jdbcType=CHAR},
			</if>
			<if test="grade != null">
				#{grade,jdbcType=CHAR},
			</if>
			<if test="model != null">
				#{model,jdbcType=BIGINT},
			</if>
			<if test="type != null">
				#{type,jdbcType=BIGINT},
			</if>
			<if test="sex != null">
				#{sex,jdbcType=CHAR},
			</if>
			<if test="date != null">
				#{date,jdbcType=TIMESTAMP},
			</if>
			<if test="coachType != null">
				#{coachType,jdbcType=CHAR},
			</if>
			<if test="result != null">
				#{result,jdbcType=CHAR},
			</if>
			<if test="coachObject != null">
				#{coachObject,jdbcType=CHAR},
			</if>
			<if test="schoolid != null">
				#{schoolid,jdbcType=BIGINT},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.njpes.www.entity.consultcenter.Analyze">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jun 25 
			21:40:18 CST 2015. -->
		update coach_analyze
		<set>
			<if test="role != null">
				role = #{role,jdbcType=CHAR},
			</if>
			<if test="grade != null">
				grade = #{grade,jdbcType=CHAR},
			</if>
			<if test="model != null">
				model = #{model,jdbcType=BIGINT},
			</if>
			<if test="type != null">
				type = #{type,jdbcType=BIGINT},
			</if>
			<if test="sex != null">
				sex = #{sex,jdbcType=CHAR},
			</if>
			<if test="date != null">
				date = #{date,jdbcType=TIMESTAMP},
			</if>
			<if test="coachType != null">
				coach_type = #{coachType,jdbcType=CHAR},
			</if>
			<if test="result != null">
				result = #{result,jdbcType=CHAR},
			</if>
			<if test="coachObject != null">
				coach_object = #{coachObject,jdbcType=CHAR},
			</if>
			<if test="schoolid != null">
				schoolid = #{schoolid,jdbcType=BIGINT},
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.njpes.www.entity.consultcenter.Analyze">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jun 25 
			21:40:18 CST 2015. -->
		update coach_analyze
		set role = #{role,jdbcType=CHAR},
		grade =
		#{grade,jdbcType=CHAR},
		model = #{model,jdbcType=BIGINT},
		type =
		#{type,jdbcType=BIGINT},
		sex = #{sex,jdbcType=CHAR},
		date =
		#{date,jdbcType=TIMESTAMP},
		coach_type = #{coachType,jdbcType=CHAR},
		result = #{result,jdbcType=CHAR},
		coach_object =
		#{coachObject,jdbcType=CHAR},
		schoolid = #{schoolid,jdbcType=BIGINT}
		where id = #{id,jdbcType=BIGINT}
	</update>

	<select id="selectEntityByPage" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from coach_analyze
		<where>
			<if test="analyze.role != null and analyze.role !=''">
				and role =
				#{analyze.role,jdbcType=CHAR}
			</if>
			<if test="analyze.grade != null and analyze.grade !=''">
				and grade = #{analyze.grade,jdbcType=CHAR}
			</if>
			<if test="analyze.model != null">
				and model = #{analyze.model,jdbcType=BIGINT}
			</if>
			<if test="analyze.type != null">
				and type = #{analyze.type,jdbcType=BIGINT}
			</if>
			<if test="analyze.sex != null and analyze.sex !=''">
				and sex = #{analyze.sex,jdbcType=CHAR}
			</if>
			<if test="analyze.coachType != null and analyze.coachType !=''">
				and coach_type = #{analyze.coachType,jdbcType=CHAR}
			</if>
			<if test="analyze.result != null and analyze.result !=''">
				and result = #{analyze.result,jdbcType=CHAR}
			</if>
			<if test="analyze.coachObject != null and analyze.coachObject !=''">
				and coach_object = #{analyze.coachObject,jdbcType=CHAR}
			</if>


			<if test="analyze.schoolid != null">
				and schoolid = #{analyze.schoolid,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and data &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and data &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
	</select>

	<select id="count" resultType="java.util.Map">
		select
		${string},count(id) num
		from
		<if test="analyze.role == 1 ">
			view_record_student
		</if>
		<if test="analyze.role == 2 ">
			view_record_teacher
		</if>
		<where>
			<if test="analyze.schoolid != null">
				and schoolid = #{analyze.schoolid,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and data &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and data &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
		group by ${string}
		order by ${string}
	</select>
	<select id="countInSchool" resultType="java.util.Map">
		select
		${string},count(id) num
		from
		<if test="analyze.role == 1 ">
			view_record_student
		</if>
		<if test="analyze.role == 2 ">
			view_record_teacher
		</if>
		<where>
			<if test="analyze.schoolid != null">
				and schoolid = #{analyze.schoolid,jdbcType=BIGINT}
			</if>
			<if test="analyze.nj != null">
				and gradeid = #{analyze.nj,jdbcType=BIGINT}
			</if>
			<if test="analyze.bj != null">
				and bjid = #{analyze.bj,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and data &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and data &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
		group by ${string}
		order by ${string}
	</select>
	<select id="countInCounty" resultType="java.util.Map">
		select
		${string},count(id) num
		from
		<if test="analyze.role == 1 ">
			view_record_student
		</if>
		<if test="analyze.role == 2 ">
			view_record_teacher
		</if>
		
		<where>
		    <if test="analyze.countyid != null">
				and countyid = #{analyze.countyid,jdbcType=BIGINT}
			</if>
			<if test="analyze.qx_or_xx != null">
				and schoolid = #{analyze.qx_or_xx,jdbcType=BIGINT}
			</if>
			<if test="analyze.nj != null">
				and gradeid = #{analyze.nj,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and data &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and data &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
		group by ${string}
		order by ${string}
	</select>
	<select id="countInCity" resultType="java.util.Map">
		select
		${string},count(id) num
		from
		<if test="analyze.role == 1 ">
			view_record_student
		</if>
		<if test="analyze.role == 2 ">
			view_record_teacher
		</if>

		<where>
			<if test="xzxs==1">
		    	and org_level=6
		    	<if test="analyze.countyid != null">
					and countyid = #{analyze.countyid,jdbcType=BIGINT}
				</if>
			</if>
			<if test="xzxs==2">
		    	and org_level=4
		    	<if test="analyze.qx_or_xx != null">
					and schoolid = #{analyze.qx_or_xx,jdbcType=BIGINT}
				</if>
			</if>
		    <if test="analyze.cityid != null">
				and cityid = #{analyze.cityid,jdbcType=BIGINT}
			</if>
			<if test="analyze.nj != null">
				and gradeid = #{analyze.nj,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and data &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and data &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
		group by ${string}
		order by ${string}
	</select>
	<select id="count1" resultType="java.util.Map">
		select
		${string},count(id) num
		from
		<if test="analyze.role == 1 ">
			view_warning_intervene_student
		</if>
		<if test="analyze.role == 2 ">
			view_warning_intervene_teacher
		</if>
		<where>


			<if test="analyze.schoolid != null">
				and school_id = #{analyze.schoolid,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and intervene_time &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and intervene_time &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
		group by ${string}
		order by ${string}
	</select>
<select id="count1InSchool" resultType="java.util.Map">
		select
		${string},count(id) num
		from
		<if test="analyze.role == 1 ">
			view_warning_intervene_student
		</if>
		<if test="analyze.role == 2 ">
			view_warning_intervene_teacher
		</if>
		<where>
			<if test="analyze.schoolid != null">
				and school_id = #{analyze.schoolid,jdbcType=BIGINT}
			</if>
			<if test="analyze.nj != null">
				and gradeid = #{analyze.nj,jdbcType=BIGINT}
			</if>
			<if test="analyze.bj != null">
				and bjid = #{analyze.bj,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and intervene_time &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and intervene_time &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
		group by ${string}
		order by ${string}
	</select>
	<select id="count1InCounty" resultType="java.util.Map">
		select
		${string},count(id) num
		from
		<if test="analyze.role == 1 ">
			view_warning_intervene_student
		</if>
		<if test="analyze.role == 2 ">
			view_warning_intervene_teacher
		</if>
		
		<where>
		    <if test="analyze.countyid != null">
				and countyid = #{analyze.countyid,jdbcType=BIGINT}
			</if>
			<if test="analyze.qx_or_xx != null">
				and school_id = #{analyze.qx_or_xx,jdbcType=BIGINT}
			</if>
			<if test="analyze.nj != null">
				and gradeid = #{analyze.nj,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and intervene_time &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and intervene_time &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
		group by ${string}
		order by ${string}
	</select>
	<select id="count1InCity" resultType="java.util.Map">
		select
		${string},count(id) num
		from
		<if test="analyze.role == 1 ">
			view_warning_intervene_student
		</if>
		<if test="analyze.role == 2 ">
			view_warning_intervene_teacher
		</if>

		<where>
			<if test="xzxs==1">
		    	and org_level=6
		    	<if test="analyze.countyid != null">
					and countyid = #{analyze.countyid,jdbcType=BIGINT}
				</if>
			</if>
			<if test="xzxs==2">
		    	and org_level=4
		    	<if test="analyze.qx_or_xx != null">
					and school_id = #{analyze.qx_or_xx,jdbcType=BIGINT}
				</if>
			</if>
		    <if test="analyze.cityid != null">
				and cityid = #{analyze.cityid,jdbcType=BIGINT}
			</if>
			<if test="analyze.nj != null">
				and gradeid = #{analyze.nj,jdbcType=BIGINT}
			</if>
			<if test="beginDate != null">
				and intervene_time &gt; #{beginDate,jdbcType=DATE}
			</if>
			<if test="endDate != null">
				and intervene_time &lt; #{endDate,jdbcType=DATE}
			</if>
		</where>
		group by ${string}
		order by ${string}
	</select>
</mapper>