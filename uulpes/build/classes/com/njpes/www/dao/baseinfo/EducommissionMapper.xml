<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.njpes.www.dao.baseinfo.EducommissionMapper" >
  <resultMap id="BaseResultMap" type="com.njpes.www.entity.baseinfo.organization.Educommission" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="jwdm" property="jwdm" jdbcType="VARCHAR" />
    <result column="jwmc" property="jwmc" jdbcType="VARCHAR" />
    <result column="jwdz" property="jwdz" jdbcType="VARCHAR" />
    <result column="jwfzr" property="jwfzr" jdbcType="VARCHAR" />
    <result column="lxdh" property="lxdh" jdbcType="VARCHAR" />
    <result column="czdh" property="czdh" jdbcType="VARCHAR" />
    <result column="dzxx" property="dzxx" jdbcType="VARCHAR" />
    <result column="zydz" property="zydz" jdbcType="VARCHAR" />
    <result column="orgid"  property="orgid" jdbcType="BIGINT" />
    <association property="org" javaType="com.njpes.www.entity.baseinfo.organization.Organization">
    		<id column="orgid" property="id" jdbcType="BIGINT" />
    		<result column="code" jdbcType="VARCHAR" property="code" />
    		<result column="name" jdbcType="VARCHAR" property="name" />
    		<result column="parent_id" jdbcType="BIGINT" property="parentId" />
    		<result column="parent_ids" jdbcType="VARCHAR" property="parentIds" />
    		<result column="org_type" jdbcType="CHAR" property="orgType" />
    		<result column="org_level" jdbcType="INTEGER" property="orgLevel" />
    		<result column="sort" jdbcType="INTEGER" property="sort" />
    		<result column="isshow" jdbcType="INTEGER" property="isshow" />
    		<result column="provinceid" jdbcType="VARCHAR" property="provinceid" />
    		<result column="cityid" jdbcType="VARCHAR" property="cityid" />
    		<result column="countyid" jdbcType="VARCHAR" property="countyid" />
    		<result column="townid" jdbcType="VARCHAR" property="townid"/>	
    		<result column="locked" jdbcType="CHAR" property="locked"/>	
    		<result column="imageurl" jdbcType="VARCHAR" property="imageurl"/>
    		<result column="introduce" jdbcType="VARCHAR" property="introduce"/>
    </association>
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.njpes.www.entity.baseinfo.organization.Educommission" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    <result column="attribate" property="attribate" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    t.id, t.jwdm, t.jwmc, t.jwdz, t.jwfzr, t.lxdh, t.czdh, t.dzxx, t.zydz,t.orgid
  </sql>
  <sql id="Base_Column_List_ORG">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 20:41:44 CST 2015.
    -->
    code, name, parent_id, parent_ids, org_type, org_level, sort, isshow,
     provinceid,cityid,countyid,townid,locked,imageurl,introduce
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    t.attribate
  </sql>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    select <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" /> ,
    <include refid="Base_Column_List_ORG" />
    from educommission t
    left join organization o on t.orgid=o.id
    where t.id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    delete from educommission
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.njpes.www.entity.baseinfo.organization.Educommission" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    insert into educommission (id, jwdm, jwmc, 
      jwdz, jwfzr, lxdh, 
      czdh, dzxx, zydz, attribate,orgid
      )
    values (#{id,jdbcType=BIGINT}, #{jwdm,jdbcType=VARCHAR}, #{jwmc,jdbcType=VARCHAR}, 
      #{jwdz,jdbcType=VARCHAR}, #{jwfzr,jdbcType=VARCHAR}, #{lxdh,jdbcType=VARCHAR}, 
      #{czdh,jdbcType=VARCHAR}, #{dzxx,jdbcType=VARCHAR}, #{zydz,jdbcType=VARCHAR}, 
      #{attribate,jdbcType=LONGVARCHAR},#{orgid,jdbcType=BIGINT}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.njpes.www.entity.baseinfo.organization.Educommission" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    insert into educommission
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="jwdm != null" >
        jwdm,
      </if>
      <if test="jwmc != null" >
        jwmc,
      </if>
      <if test="jwdz != null" >
        jwdz,
      </if>
      <if test="jwfzr != null" >
        jwfzr,
      </if>
      <if test="lxdh != null" >
        lxdh,
      </if>
      <if test="czdh != null" >
        czdh,
      </if>
      <if test="dzxx != null" >
        dzxx,
      </if>
      <if test="zydz != null" >
        zydz,
      </if>
      <if test="attribate != null" >
        attribate,
      </if>
      <if test="orgid != null">
      	orgid,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="jwdm != null" >
        #{jwdm,jdbcType=VARCHAR},
      </if>
      <if test="jwmc != null" >
        #{jwmc,jdbcType=VARCHAR},
      </if>
      <if test="jwdz != null" >
        #{jwdz,jdbcType=VARCHAR},
      </if>
      <if test="jwfzr != null" >
        #{jwfzr,jdbcType=VARCHAR},
      </if>
      <if test="lxdh != null" >
        #{lxdh,jdbcType=VARCHAR},
      </if>
      <if test="czdh != null" >
        #{czdh,jdbcType=VARCHAR},
      </if>
      <if test="dzxx != null" >
        #{dzxx,jdbcType=VARCHAR},
      </if>
      <if test="zydz != null" >
        #{zydz,jdbcType=VARCHAR},
      </if>
      <if test="attribate != null" >
        #{attribate,jdbcType=LONGVARCHAR},
      </if>
       <if test="orgid != null" >
      	#{orgid,jdbcType=BIGINT},
      	</if>
    </trim>
  </insert>
  <!-- 批量导入 -->
  <insert id="insertBatch" useGeneratedKeys="true" parameterType="java.util.List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon May 25 21:52:24 CST 2015.
    -->
    <selectKey resultType="long" keyProperty="id" order="AFTER">  
        SELECT  
        LAST_INSERT_ID()  
    </selectKey>  
    insert into educommission (id, jwdm, jwmc, 
      jwdz, jwfzr, lxdh, 
      czdh, dzxx, zydz,orgid)
    values 
    <foreach collection="list" item="item" index="index" separator="," >  
      (#{item.id,jdbcType=BIGINT}, #{item.jwdm,jdbcType=VARCHAR}, #{item.jwmc,jdbcType=VARCHAR}, 
      #{item.jwdz,jdbcType=VARCHAR}, #{item.jwfzr,jdbcType=VARCHAR}, #{item.lxdh,jdbcType=VARCHAR}, 
      #{item.czdh,jdbcType=VARCHAR}, #{item.dzxx,jdbcType=VARCHAR}, #{item.zydz,jdbcType=VARCHAR}, 
      #{item.orgid,jdbcType=BIGINT}
      )
    </foreach>
  </insert>
   <!-- 批量更新 -->
  <update id="updateBatch" parameterType="java.util.List">
    <foreach collection="list" item="item" open="" close="" separator=";" >  
	    update educommission
	    <set> 
	      jwdm = #{item.jwdm,jdbcType=VARCHAR},
	      jwmc = #{item.jwmc,jdbcType=VARCHAR},
	      jwdz = #{item.jwdz,jdbcType=VARCHAR},
	      jwfzr = #{item.jwfzr,jdbcType=VARCHAR},
	      lxdh = #{item.lxdh,jdbcType=VARCHAR},
	      czdh = #{item.czdh,jdbcType=VARCHAR},
	      dzxx = #{item.dzxx,jdbcType=VARCHAR},
	      zydz = #{item.zydz,jdbcType=VARCHAR},
	      orgid = #{item.orgid,jdbcType=BIGINT}
	    </set> 
    	<where>  
       		jwdm = #{item.jwdm,jdbcType=VARCHAR}
       	</where>    
    </foreach>  
  </update>
  
  <update id="updateByPrimaryKeySelective" parameterType="com.njpes.www.entity.baseinfo.organization.Educommission" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    update educommission
    <set >
      <if test="jwdm != null" >
        jwdm = #{jwdm,jdbcType=VARCHAR},
      </if>
      <if test="jwmc != null" >
        jwmc = #{jwmc,jdbcType=VARCHAR},
      </if>
      <if test="jwdz != null" >
        jwdz = #{jwdz,jdbcType=VARCHAR},
      </if>
      <if test="jwfzr != null" >
        jwfzr = #{jwfzr,jdbcType=VARCHAR},
      </if>
      <if test="lxdh != null" >
        lxdh = #{lxdh,jdbcType=VARCHAR},
      </if>
      <if test="czdh != null" >
        czdh = #{czdh,jdbcType=VARCHAR},
      </if>
      <if test="dzxx != null" >
        dzxx = #{dzxx,jdbcType=VARCHAR},
      </if>
      <if test="zydz != null" >
        zydz = #{zydz,jdbcType=VARCHAR},
      </if>
      <if test="attribate != null" >
        attribate = #{attribate,jdbcType=LONGVARCHAR},
      </if>
      <if test="orgid != null" >
        orgid = #{orgid,jdbcType=BIGINT},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.njpes.www.entity.baseinfo.organization.Educommission" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    update educommission
    set jwdm = #{jwdm,jdbcType=VARCHAR},
      jwmc = #{jwmc,jdbcType=VARCHAR},
      jwdz = #{jwdz,jdbcType=VARCHAR},
      jwfzr = #{jwfzr,jdbcType=VARCHAR},
      lxdh = #{lxdh,jdbcType=VARCHAR},
      czdh = #{czdh,jdbcType=VARCHAR},
      dzxx = #{dzxx,jdbcType=VARCHAR},
      zydz = #{zydz,jdbcType=VARCHAR},
      attribate = #{attribate,jdbcType=LONGVARCHAR},
      orgid = #{orgid,jdbcType=BIGINT}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.njpes.www.entity.baseinfo.organization.Educommission" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat May 09 22:26:21 CST 2015.
    -->
    update educommission
    set jwdm = #{jwdm,jdbcType=VARCHAR},
      jwmc = #{jwmc,jdbcType=VARCHAR},
      jwdz = #{jwdz,jdbcType=VARCHAR},
      jwfzr = #{jwfzr,jdbcType=VARCHAR},
      lxdh = #{lxdh,jdbcType=VARCHAR},
      czdh = #{czdh,jdbcType=VARCHAR},
      dzxx = #{dzxx,jdbcType=VARCHAR},
      zydz = #{zydz,jdbcType=VARCHAR},
      orgid = #{orgid,jdbcType=BIGINT}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <select id="selectByOrgId" resultMap="ResultMapWithBLOBs">
  	select <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" /> ,
    <include refid="Base_Column_List_ORG" />
    from educommission t
    left join organization o on t.orgid=o.id
    where o.id=#{orgid,jdbcType=BIGINT}
  </select>
  <delete id="deleteByOrgid">
  	delete from educommission where orgid=#{orgid,jdbcType=BIGINT}
  </delete>
  <select id="selectSubECsInWebQueryByPage" resultMap="ResultMapWithBLOBs">
  	select <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" /> ,
    <include refid="Base_Column_List_ORG" />
    from educommission t
    left join organization o on t.orgid=o.id
    <where>
			<if test="org.name != null and org.name !=''">
				and o.name like CONCAT('%',#{org.name,jdbcType=VARCHAR},'%' ) 
			</if>
			<if test="org.orgType != null and org.orgType !=''">
				and o.org_type = #{org.orgType,jdbcType=CHAR}
			</if>
			<if test="org.orgLevel != null and org.orgLevel !=''">
				and o.org_level = #{org.orgLevel,jdbcType=INTEGER}
			</if>
			<if test="org.provinceid != null and org.provinceid !=''">
				and o.provinceid = #{org.provinceid,jdbcType=VARCHAR}
			</if>
			<if test="org.cityid != null and org.cityid !=''">
				and o.cityid = #{org.cityid,jdbcType=VARCHAR}
			</if>
			<if test="org.countyid != null and org.countyid !=''">
				and o.countyid = #{org.countyid,jdbcType=VARCHAR}
			</if>
			<if test="org.townid != null and org.townid !=''">
				and o.townid = #{org.townid,jdbcType=VARCHAR}
			</if>
			<if test="org.parentId !=null and org.parentId !=''">
				and o.parent_id = #{org.parentId,jdbcType=BIGINT}
			</if>
		</where>
  </select>
  <select id="getEdusUnderOrgid" resultMap="ResultMapWithBLOBs">
  	 select * from educommission s where orgid in (select id from organization where org_type='1' and parent_id = #{orgid})
  </select>
</mapper>